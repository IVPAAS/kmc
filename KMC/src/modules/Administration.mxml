<?xml version="1.0" encoding="utf-8"?>
<modules:KmcModule xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:modules="com.kaltura.kmc.modules.*" 
				   xmlns:control="com.kaltura.kmc.modules.admin.control.*"
				   xmlns:view="com.kaltura.kmc.modules.admin.view.*" 
				   xmlns:model="com.kaltura.kmc.modules.admin.model.*"
				   layout="vertical" minHeight="520" minWidth="950" styleName="mainView"
				   >
	<mx:Metadata>
		[ResourceBundle("admin")]
	</mx:Metadata>
	<mx:Script>
		<![CDATA[
			import com.kaltura.kmc.modules.admin.model.AdminModelLocator;
			
			import mx.core.IFlexDisplayObject;
			private static const VERSION:String = "0.1";

			/**
			 * KMC is responsible to use the value of
			 * this const as the id of this module.
			 * */
			public static const NAME:String = "admin";
			
			
			[Bindable]
			/**
			 * module model
			 * */
			private var _model:AdminModelLocator = AdminModelLocator.getInstance();


			override public function getModuleName():String {
				return NAME;
			}


			override public function getModuleVersion():String {
				return VERSION;
			}


			override public function showSubtab(subtab:String, data:Object = null):void {
//				// save data in the attic
//				if (data) {
//					putInAttic(data);
//				}
//				// show the tab
//				_initialTab = subtab;
//				if (_ready) {
//					switchToTab(subtab);
//				}
			}


			override protected function start():void {
				trace("start");
				initModel();
				users.refreshData();
			}
			
			
			private function initModel():void {
				_model.kc = _kc;
				_model.usersModel.upgradeLink = new XML(_uiconf.confFile).upgradeLink.text().toString();
			}


			/**
			 * change view
			 * */
			private function onItemClick(event:Event):void {

			}


		]]>
	</mx:Script>
	<!-- the FrontController, containing Commands specific to this appliation -->
	<control:AdminController/>
	

	<mx:HBox width="100%" styleName="tabsContainer" enabled="{true}">
		<mx:TabBar id="secTln" styleName="tln" itemClick="onItemClick(event)" buttonMode="true"
				   dataProvider="contentView"/>
	</mx:HBox>
		<mx:ViewStack id="contentView" width="100%" height="100%" styleName="contentViewStack"
					  horizontalScrollPolicy="off" verticalScrollPolicy="off">
			<view:Users id="users" label="{resourceManager.getString('admin','users_tab')}"
						width="100%" model="{_model.usersModel}"/>
			<view:Roles id="roles" label="{resourceManager.getString('admin','roles_tab')}"
						width="100%"/>
		</mx:ViewStack>

</modules:KmcModule>
